# ============================================================================
# Catalyst Trading System - Environment Variables Template
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# Database Configuration (DigitalOcean Managed PostgreSQL)
DATABASE_URL=postgresql://username:password@host:port/dbname?sslmode=require

# Service Ports (Internal Docker Network)
ORCHESTRATION_PORT=5000
SCANNER_PORT=5001
PATTERN_PORT=5002
TECHNICAL_PORT=5003
RISK_PORT=5004
TRADING_PORT=5005
WORKFLOW_PORT=5006
NEWS_PORT=5008
REPORTING_PORT=5009

# Alpaca Trading API
ALPACA_API_KEY=your_api_key_here
ALPACA_SECRET_KEY=your_secret_key_here
ALPACA_BASE_URL=https://paper-api.alpaca.markets

# News APIs
NEWS_API_KEY=your_newsapi_key_here
BENZINGA_API_KEY=your_benzinga_key_here

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379

# Service URLs (Internal Docker Network)
SCANNER_URL=http://scanner:5001
PATTERN_URL=http://pattern:5002
TECHNICAL_URL=http://technical:5003
RISK_URL=http://risk-manager:5004
TRADING_URL=http://trading:5005
NEWS_URL=http://news:5008
REPORTING_URL=http://reporting:5009
WORKFLOW_URL=http://workflow:5006

# Trading Configuration
MAX_DAILY_LOSS=1000
MAX_POSITION_SIZE=5000
MAX_POSITIONS=5
TRADING_MODE=paper

# =============================================================================
# AUTONOMOUS TRADING CONFIGURATION
# =============================================================================
# Session Mode: "autonomous" or "supervised"
# autonomous = Execute trades immediately after risk validation
# supervised = Wait for human approval (5-min timeout)
TRADING_SESSION_MODE=autonomous

# Workflow Automation
WORKFLOW_AUTO_EXECUTE=true
WORKFLOW_SCAN_FREQUENCY_MINUTES=30
WORKFLOW_EXECUTE_TOP_N=3

# Risk Management (loaded from config/risk_parameters.yaml)
RISK_CONFIG_PATH=config/risk_parameters.yaml
RISK_HOT_RELOAD=true

# Trading Config (loaded from config/trading_config.yaml)
TRADING_CONFIG_PATH=config/trading_config.yaml
TRADING_HOT_RELOAD=true

# =============================================================================
# EMAIL ALERTS CONFIGURATION - DigitalOcean Email Service
# =============================================================================
# DigitalOcean SMTP (Production)
SMTP_HOST=smtp.digitalocean.com
SMTP_PORT=587
SMTP_USERNAME=your-do-smtp-username
SMTP_PASSWORD=your-do-smtp-api-token
SMTP_FROM=catalyst-alerts@yourdomain.com
SMTP_TLS=true

# OR Gmail SMTP (Development/Testing)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=your-email@gmail.com
# SMTP_TLS=true

# Alert Recipients (comma-separated)
ALERT_EMAIL_CRITICAL=trader@yourdomain.com,admin@yourdomain.com
ALERT_EMAIL_WARNING=trader@yourdomain.com
ALERT_EMAIL_INFO=trader@yourdomain.com

# Alert Configuration
ALERT_COOLDOWN_MINUTES=15
ALERT_BATCH_WINDOW_SECONDS=300
ALERT_MAX_PER_HOUR=20
ENABLE_EMAIL_ALERTS=true

# =============================================================================
# CRON AUTOMATION (for reference - configure in crontab)
# =============================================================================
# Market hours: 9:30 AM - 4:00 PM ET
# Perth time: 10:30 PM - 5:00 AM AWST (next day)
#
# Market open workflow (10:30 PM Perth = 9:30 AM ET):
# 30 22 * * 1-5 curl -X POST http://localhost:5006/api/v1/workflow/start -d '{"mode": "autonomous"}'
#
# Periodic scans (every 30 min during market hours):
# 0,30 23 * * 1-5 curl -X POST http://localhost:5006/api/v1/workflow/start -d '{"mode": "autonomous"}'
# 0,30 0-4 * * 2-6 curl -X POST http://localhost:5006/api/v1/workflow/start -d '{"mode": "autonomous"}'

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# Feature Flags
ENABLE_PAPER_TRADING=true
ENABLE_LIVE_TRADING=false
ENABLE_NEWS_SENTIMENT=true
ENABLE_PATTERN_DETECTION=true
ENABLE_AUTONOMOUS_TRADING=true
