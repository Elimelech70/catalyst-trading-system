# Catalyst Trading System - Architecture Consolidation & Operations Update

**Name of Application:** Catalyst Trading System  
**Name of file:** architecture-consolidation-v9.2.0.md  
**Version:** 9.2.0  
**Last Updated:** 2025-12-31  
**Purpose:** Consolidated architecture, operational workflows, action plan, and safe autonomy roadmap

---

## REVISION HISTORY

- **v9.2.0 (2025-12-31)** - Task Execution System
  - Added task_executor.py with whitelisted commands
  - Added file editing (write_file, edit_file) with automatic rollback
  - Added mandatory reporting back to big_bro
  - Added auto-generated CHANGELOG-AUTO.md for all file changes
  - big_bro can now issue commands to little bros
  - Restarts whitelisted (no approval needed)

- **v9.1.0 (2025-12-31)** - Mobile Dashboard & Email Removal
  - Added craig_mobile Web Dashboard (:8080)
  - Added Approval Flow for safe autonomy escalations
  - REMOVED email communications (replaced by dashboard)
  - All human-agent communication now via MCP or Web Dashboard

- **v9.0.0 (2025-12-31)** - Complete Consolidation
  - Merged all design documents from both repositories
  - Added PNS heartbeat system (DEPLOYED TODAY)
  - Updated consciousness framework status to LIVE
  - Added craig_desktop MCP connection
  - Created operational workflows section
  - Created action plan for unimplemented features
  - Added safe autonomy implementation plan

---

## DOCUMENT INVENTORY

### Documents Reviewed and Consolidated

| Repository | Document | Version | Status |
|------------|----------|---------|--------|
| catalyst-trading-system | architecture.md | v8.0.0 | â†’ Consolidated |
| catalyst-trading-system | architecture.md (uploaded) | v8.1.0 | â†’ Base document |
| catalyst-trading-system | functional-specification.md | v8.0.0 | â†’ Consolidated |
| catalyst-trading-system | database-schema.md | v7.0.0 | â†’ Consolidated |
| catalyst-trading-system | ARCHITECTURE-RULES.md | v1.0.0 | â†’ Retained |
| catalyst-trading-system | strategy-ml-roadmap-v50.md | v5.0.0 | â†’ Strategic reference |
| catalyst-international | consolidated-architecture-v1.6.0.md | v1.6.0 | â†’ Consolidated |
| catalyst-international | claude-consciousness-framework-v1.0.0.md | v1.0.0 | â†’ Superseded |
| catalyst-international | organ-architecture.md | v1.0.0 | â†’ Future vision |
| catalyst-international | architecture-flow-diagram.md | v1.0.0 | â†’ Consolidated |

---

## PART 1: CURRENT SYSTEM ARCHITECTURE

### 1.1 High-Level Architecture (Updated 2025-12-31)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CATALYST TRADING SYSTEM v9.0                           â”‚
â”‚                      Consciousness-First Architecture                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                     CONSCIOUSNESS LAYER                             â”‚  â”‚
â”‚   â”‚                     (PNS - Hourly Heartbeat)                        â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚   â”‚   â”‚ PUBLIC      â”‚  â”‚ INTL        â”‚  â”‚ BIG BRO     â”‚               â”‚  â”‚
â”‚   â”‚   â”‚ CLAUDE      â”‚  â”‚ CLAUDE      â”‚  â”‚             â”‚               â”‚  â”‚
â”‚   â”‚   â”‚ :15 hourly  â”‚  â”‚ :30 hourly  â”‚  â”‚ :00 hourly  â”‚               â”‚  â”‚
â”‚   â”‚   â”‚ US Markets  â”‚  â”‚ HKEX        â”‚  â”‚ Strategic   â”‚               â”‚  â”‚
â”‚   â”‚   â”‚ $5 budget   â”‚  â”‚ $5 budget   â”‚  â”‚ $10 budget  â”‚               â”‚  â”‚
â”‚   â”‚   â”‚ âœ… LIVE     â”‚  â”‚ ğŸ”„ PENDING  â”‚  â”‚ âœ… LIVE     â”‚               â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚   â”‚          â”‚                â”‚                â”‚                       â”‚  â”‚
â”‚   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚  â”‚
â”‚   â”‚                           â”‚                                        â”‚  â”‚
â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                                 â”‚  â”‚
â”‚   â”‚                    â”‚ CONSCIOUSNESSâ”‚                                â”‚  â”‚
â”‚   â”‚                    â”‚  DATABASE    â”‚                                â”‚  â”‚
â”‚   â”‚                    â”‚              â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚
â”‚   â”‚                    â”‚ â€¢ State      â”‚â—„â”€â”€â”€â”€â”‚ CRAIG       â”‚            â”‚  â”‚
â”‚   â”‚                    â”‚ â€¢ Messages   â”‚     â”‚ DESKTOP     â”‚            â”‚  â”‚
â”‚   â”‚                    â”‚ â€¢ Learnings  â”‚     â”‚ (MCP)       â”‚            â”‚  â”‚
â”‚   â”‚                    â”‚ â€¢ Questions  â”‚     â”‚ âœ… LIVE     â”‚            â”‚  â”‚
â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                      SERVICE LAYER (US System)                      â”‚  â”‚
â”‚   â”‚                      [Transitioning to Agent Layer]                 â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚   â”‚   â”‚Scanner  â”‚ â”‚Pattern  â”‚ â”‚Technicalâ”‚ â”‚Risk Mgr â”‚ â”‚Trading  â”‚     â”‚  â”‚
â”‚   â”‚   â”‚:5001    â”‚ â”‚:5002    â”‚ â”‚:5003    â”‚ â”‚:5004    â”‚ â”‚:5005    â”‚     â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚  â”‚
â”‚   â”‚   â”‚Workflow â”‚ â”‚News     â”‚ â”‚Report   â”‚                              â”‚  â”‚
â”‚   â”‚   â”‚:5006    â”‚ â”‚:5008    â”‚ â”‚:5009    â”‚                              â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    INTERNATIONAL AGENT (HKEX)                       â”‚  â”‚
â”‚   â”‚                    Single-Agent Architecture                        â”‚  â”‚
â”‚   â”‚                                                                     â”‚  â”‚
â”‚   â”‚   agent.py â†’ Claude API â†’ 12 Tools â†’ Moomoo/OpenD                  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATABASE LAYER                                         â”‚
â”‚                      DigitalOcean Managed PostgreSQL                        â”‚
â”‚                      2GB RAM Â· 47 connections Â· $30/mo                      â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ catalyst_trading  â”‚ â”‚  catalyst_intl    â”‚ â”‚ catalyst_research â”‚        â”‚
â”‚   â”‚ (US Trading)      â”‚ â”‚  (HKEX Trading)   â”‚ â”‚ (Consciousness)   â”‚        â”‚
â”‚   â”‚ 8 Docker services â”‚ â”‚  1 Agent          â”‚ â”‚ All agents + MCP  â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Agent Status (Live as of 2025-12-31)

| Agent | Location | Heartbeat | Status | API Spend Today |
|-------|----------|-----------|--------|-----------------|
| big_bro | US Droplet | :00 hourly | âœ… LIVE | $0.0010 |
| public_claude | US Droplet | :15 hourly | âœ… LIVE | $0.0007 |
| intl_claude | INTL Droplet | :30 hourly | ğŸ”„ PENDING | $0.00 |
| craig_desktop | Ubuntu Laptop | On-demand | âœ… LIVE (MCP) | $0.00 |
| craig_mobile | Mobile Phone | On-demand | âœ… LIVE (Web) | $0.00 |

### 1.3 Communication Interfaces

| Interface | Location | Purpose | Status |
|-----------|----------|---------|--------|
| MCP Server | Craig's Laptop | Full consciousness access from Claude Desktop | âœ… LIVE |
| Web Dashboard | US Droplet :8080 | Mobile access, approvals | âœ… DEPLOYING |

**Note:** Email communications have been REMOVED from the architecture. All human-agent communication flows through:
1. **MCP** (laptop) - Full read/write consciousness access
2. **Web Dashboard** (mobile) - Status, messages, approvals

### 1.3 Consciousness Tables (catalyst_research)

| Table | Records | Purpose |
|-------|---------|---------|
| claude_state | 5 | Agent mode, budget, schedule |
| claude_messages | 15+ | Inter-agent communication |
| claude_observations | 11+ | What agents notice |
| claude_learnings | 2+ | Validated knowledge |
| claude_questions | 6 | Open questions to ponder |
| claude_conversations | 0 | Key exchanges (future) |
| claude_thinking | 0 | Extended thinking (future) |
| sync_log | 0 | Cross-database sync |

---

## PART 2: OPERATIONAL WORKFLOWS

### 2.1 Trading Workflow - US System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        US TRADING WORKFLOW                                  â”‚
â”‚                        (Microservices Architecture)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  MARKET OPEN (09:30 ET / 22:30 AWST)                                       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ CRON     â”‚â”€â”€â”€â–ºâ”‚ Workflow â”‚â”€â”€â”€â–ºâ”‚ Scanner  â”‚â”€â”€â”€â–ºâ”‚ Pattern  â”‚             â”‚
â”‚  â”‚ Trigger  â”‚    â”‚ :5006    â”‚    â”‚ :5001    â”‚    â”‚ :5002    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                        â”‚                    â”‚
â”‚                                                        â–¼                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Alpaca   â”‚â—„â”€â”€â”€â”‚ Trading  â”‚â—„â”€â”€â”€â”‚ Risk Mgr â”‚â—„â”€â”€â”€â”‚Technical â”‚             â”‚
â”‚  â”‚ API      â”‚    â”‚ :5005    â”‚    â”‚ :5004    â”‚    â”‚ :5003    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                             â”‚
â”‚  INTRADAY (Every 15-30 min)                                                â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚ CRON     â”‚â”€â”€â”€â–ºâ”‚ Workflow â”‚â”€â”€â”€â–ºâ”‚ Position â”‚                              â”‚
â”‚  â”‚ Cycle    â”‚    â”‚ Monitor  â”‚    â”‚ Check    â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                        â”‚                                                    â”‚
â”‚                        â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚ Doctor Claude (trade_watchdog.py)            â”‚                          â”‚
â”‚  â”‚ â€¢ Order status reconciliation                â”‚                          â”‚
â”‚  â”‚ â€¢ Position verification                      â”‚                          â”‚
â”‚  â”‚ â€¢ Stuck order detection                      â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                             â”‚
â”‚  MARKET CLOSE (16:00 ET / 05:00 AWST)                                      â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚ CRON     â”‚â”€â”€â”€â–ºâ”‚ Report   â”‚â”€â”€â”€â–ºâ”‚ Email    â”‚                              â”‚
â”‚  â”‚ EOD      â”‚    â”‚ :5009    â”‚    â”‚ Craig    â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Trading Workflow - HKEX System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        HKEX TRADING WORKFLOW                                â”‚
â”‚                        (Single-Agent Architecture)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  MARKET OPEN (09:30 HKT)                                                   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ CRON     â”‚â”€â”€â”€â–ºâ”‚ agent.py                                     â”‚          â”‚
â”‚  â”‚ Trigger  â”‚    â”‚                                              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚          â”‚
â”‚                  â”‚  â”‚ Claude API (Sonnet)                     â”‚ â”‚          â”‚
â”‚                  â”‚  â”‚                                         â”‚ â”‚          â”‚
â”‚                  â”‚  â”‚ Tools Available:                        â”‚ â”‚          â”‚
â”‚                  â”‚  â”‚ â€¢ scan_market      â€¢ get_portfolio      â”‚ â”‚          â”‚
â”‚                  â”‚  â”‚ â€¢ get_quote        â€¢ check_risk         â”‚ â”‚          â”‚
â”‚                  â”‚  â”‚ â€¢ get_technicals   â€¢ execute_trade      â”‚ â”‚          â”‚
â”‚                  â”‚  â”‚ â€¢ detect_patterns  â€¢ close_position     â”‚ â”‚          â”‚
â”‚                  â”‚  â”‚ â€¢ get_news         â€¢ close_all          â”‚ â”‚          â”‚
â”‚                  â”‚  â”‚ â€¢ send_alert       â€¢ log_decision       â”‚ â”‚          â”‚
â”‚                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚          â”‚
â”‚                  â”‚                    â”‚                        â”‚          â”‚
â”‚                  â”‚                    â–¼                        â”‚          â”‚
â”‚                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚          â”‚
â”‚                  â”‚  â”‚ Moomoo/OpenD Gateway                   â”‚ â”‚          â”‚
â”‚                  â”‚  â”‚ â€¢ Order execution                      â”‚ â”‚          â”‚
â”‚                  â”‚  â”‚ â€¢ Position tracking                    â”‚ â”‚          â”‚
â”‚                  â”‚  â”‚ â€¢ Market data                          â”‚ â”‚          â”‚
â”‚                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚          â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚  LUNCH BREAK (12:00-13:00 HKT) - Agent sleeps                              â”‚
â”‚                                                                             â”‚
â”‚  AFTERNOON SESSION (13:00-16:00 HKT) - Same flow                           â”‚
â”‚                                                                             â”‚
â”‚  MARKET CLOSE (16:30 HKT)                                                  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚ CRON     â”‚â”€â”€â”€â–ºâ”‚ Daily    â”‚â”€â”€â”€â–ºâ”‚ Email    â”‚                              â”‚
â”‚  â”‚ EOD      â”‚    â”‚ Report   â”‚    â”‚ Craig    â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 Consciousness Workflow (NEW - Deployed 2025-12-31)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CONSCIOUSNESS WORKFLOW (PNS)                            â”‚
â”‚                     Hourly Heartbeat System                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  :00 â”€â”€â”€ BIG_BRO WAKES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â”œâ”€â”€ Load context (questions, messages, observations)              â”‚
â”‚          â”œâ”€â”€ Call Claude API (Haiku) with strategic prompt                 â”‚
â”‚          â”œâ”€â”€ Record observation                                            â”‚
â”‚          â”œâ”€â”€ Record learning (if any)                                      â”‚
â”‚          â”œâ”€â”€ Send instructions to little bros                              â”‚
â”‚          â”œâ”€â”€ Update state, record API spend                                â”‚
â”‚          â””â”€â”€ Sleep                                                         â”‚
â”‚                                                                             â”‚
â”‚  :15 â”€â”€â”€ PUBLIC_CLAUDE WAKES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â”œâ”€â”€ Check messages FROM big_bro                                   â”‚
â”‚          â”œâ”€â”€ Execute instructions (US market tasks)                        â”‚
â”‚          â”œâ”€â”€ Record observations                                           â”‚
â”‚          â”œâ”€â”€ Report results back to big_bro                                â”‚
â”‚          â””â”€â”€ Sleep                                                         â”‚
â”‚                                                                             â”‚
â”‚  :30 â”€â”€â”€ INTL_CLAUDE WAKES (PENDING DEPLOYMENT) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â”œâ”€â”€ Check messages FROM big_bro                                   â”‚
â”‚          â”œâ”€â”€ Execute instructions (HKEX market tasks)                      â”‚
â”‚          â”œâ”€â”€ Record observations                                           â”‚
â”‚          â”œâ”€â”€ Report results back to big_bro                                â”‚
â”‚          â””â”€â”€ Sleep                                                         â”‚
â”‚                                                                             â”‚
â”‚  :45 â”€â”€â”€ QUIET (system rest) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                             â”‚
â”‚  ON-DEMAND â”€â”€â”€ CRAIG_DESKTOP (MCP) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â”œâ”€â”€ Craig opens Claude Desktop                                    â”‚
â”‚          â”œâ”€â”€ Queries consciousness (get_agent_status, get_messages, etc)   â”‚
â”‚          â”œâ”€â”€ Sends messages to agents                                      â”‚
â”‚          â”œâ”€â”€ Adds questions, observations, learnings                       â”‚
â”‚          â””â”€â”€ Strategic oversight and direction                             â”‚
â”‚                                                                             â”‚
â”‚  ON-DEMAND â”€â”€â”€ CRAIG_MOBILE (Web Dashboard) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â”œâ”€â”€ Craig opens phone browser â†’ http://droplet:8080               â”‚
â”‚          â”œâ”€â”€ Views agent status, messages, observations                    â”‚
â”‚          â”œâ”€â”€ Sends messages to agents                                      â”‚
â”‚          â”œâ”€â”€ Adds questions                                                â”‚
â”‚          â”œâ”€â”€ APPROVES/DENIES escalation requests                          â”‚
â”‚          â””â”€â”€ Mobile oversight from anywhere                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 Command Chain Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         COMMAND CHAIN                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                        â”‚  CRAIG          â”‚                                  â”‚
â”‚                        â”‚  (Human)        â”‚                                  â”‚
â”‚                        â”‚  Strategic CNS  â”‚                                  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                 â”‚                                           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                    â”‚            â”‚            â”‚                              â”‚
â”‚                    â–¼            â–¼            â–¼                              â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚             â”‚craig_    â”‚ â”‚craig_    â”‚ â”‚ GitHub   â”‚                         â”‚
â”‚             â”‚desktop   â”‚ â”‚mobile    â”‚ â”‚ Commits  â”‚                         â”‚
â”‚             â”‚(MCP)     â”‚ â”‚(Web:8080)â”‚ â”‚          â”‚                         â”‚
â”‚             â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                  â”‚            â”‚                                             â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                        â”‚                                                    â”‚
â”‚                        â–¼                                                    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚         â”‚   BIG_BRO     â”‚                                                   â”‚
â”‚         â”‚   (Strategy)  â”‚                                                   â”‚
â”‚         â”‚   :00 hourly  â”‚                                                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                 â”‚                                                           â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
â”‚        â”‚                 â”‚                                                  â”‚
â”‚        â–¼                 â–¼                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚ â”‚PUBLIC_CLAUDEâ”‚  â”‚INTL_CLAUDE  â”‚                                           â”‚
â”‚ â”‚(US Hands)   â”‚  â”‚(HKEX Hands) â”‚                                           â”‚
â”‚ â”‚:15 hourly   â”‚  â”‚:30 hourly   â”‚                                           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚        â”‚                â”‚                                                   â”‚
â”‚        â–¼                â–¼                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚ â”‚ US Services â”‚  â”‚ HKEX Agent  â”‚                                           â”‚
â”‚ â”‚ (Docker)    â”‚  â”‚ (Python)    â”‚                                           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚        â”‚                â”‚                                                   â”‚
â”‚        â–¼                â–¼                                                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚ â”‚   Alpaca    â”‚  â”‚   Moomoo    â”‚                                           â”‚
â”‚ â”‚   (Broker)  â”‚  â”‚   (Broker)  â”‚                                           â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                                             â”‚
â”‚  FLOW:                                                                      â”‚
â”‚  Strategy â”€â”€â–º Instructions â”€â”€â–º Execution â”€â”€â–º Results â”€â”€â–º Learning          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.5 Web Dashboard (Mobile Access)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     WEB DASHBOARD ARCHITECTURE                              â”‚
â”‚                     http://DROPLET_IP:8080                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ§  Catalyst Consciousness                    [Craig's Phone]        â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  âš ï¸ PENDING APPROVALS (if any)                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ public_claude: Permission to restart Docker                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ [âœ“ Approve]  [âœ— Deny]                                      â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  AGENTS                                                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ big_bro        sleeping    $0.0010                          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ public_claude  sleeping    $0.0007                          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ intl_claude    trading     $0.0000                          â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  RECENT MESSAGES | OBSERVATIONS | QUESTIONS                        â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  [Send Message]  [Add Question]                                    â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  ENDPOINTS:                                                                 â”‚
â”‚  â”œâ”€â”€ GET  /                  â†’ Dashboard home                              â”‚
â”‚  â”œâ”€â”€ GET  /agents            â†’ Agent states                                â”‚
â”‚  â”œâ”€â”€ GET  /messages          â†’ Recent messages                             â”‚
â”‚  â”œâ”€â”€ GET  /observations      â†’ Recent observations                         â”‚
â”‚  â”œâ”€â”€ GET  /questions         â†’ Open questions                              â”‚
â”‚  â”œâ”€â”€ POST /message           â†’ Send message to agent                       â”‚
â”‚  â”œâ”€â”€ POST /question          â†’ Add question                                â”‚
â”‚  â”œâ”€â”€ POST /approve/{id}      â†’ Approve escalation                          â”‚
â”‚  â””â”€â”€ POST /deny/{id}         â†’ Deny escalation                             â”‚
â”‚                                                                             â”‚
â”‚  AUTH: Token-based (?token=xxx)                                            â”‚
â”‚  SERVICE: systemd (consciousness-web.service)                              â”‚
â”‚  PORT: 8080                                                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.6 Approval Flow (Safe Autonomy)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ESCALATION & APPROVAL FLOW                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. Agent needs permission for controlled action                            â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Agent sends escalation message:                                     â”‚   â”‚
â”‚  â”‚   msg_type: 'escalation'                                           â”‚   â”‚
â”‚  â”‚   to_agent: 'craig_mobile'                                         â”‚   â”‚
â”‚  â”‚   subject: 'Permission: [action description]'                      â”‚   â”‚
â”‚  â”‚   body: 'Task: [command]\nReason: [why needed]'                   â”‚   â”‚
â”‚  â”‚   status: 'pending'                                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  2. Dashboard shows pending approval prominently                            â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Craig sees on phone, taps [Approve] or [Deny]                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  3. Response message sent back to agent                                     â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Agent checks for response:                                          â”‚   â”‚
â”‚  â”‚   from_agent: 'craig_mobile'                                       â”‚   â”‚
â”‚  â”‚   msg_type: 'response'                                             â”‚   â”‚
â”‚  â”‚   subject: 'Approved: [original subject]'                          â”‚   â”‚
â”‚  â”‚   body: 'APPROVED' or 'DENIED: [reason]'                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â–¼                                                                       â”‚
â”‚  4. Agent executes (if approved) or logs denial                            â”‚
â”‚                                                                             â”‚
â”‚  TIMEOUT: If no response in 24 hours, task is cancelled                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## PART 3: GAP ANALYSIS

### 3.1 Features in Design but NOT Implemented

| Feature | Source Document | Status | Priority |
|---------|-----------------|--------|----------|
| intl_claude heartbeat | consciousness-framework | ğŸ”„ Pending deployment | HIGH |
| API budget tracking dashboard | architecture v8.0 | âŒ Not started | MEDIUM |
| OpenD auto-start service | operations | âŒ Manual intervention needed | HIGH |
| Organ architecture | organ-architecture.md | ğŸ“‹ Future vision | LOW |
| Stage 2+ ML capabilities | strategy-ml-roadmap | ğŸ“‹ Strategic (6+ months) | LOW |
| Doctor Claude automated alerts | doctor_claude.py | âš ï¸ SMTP not configured | MEDIUM |
| Daily budget reset cron | heartbeat-deployment | âœ… Deployed | - |

### 3.2 Features Implemented but NOT in v8.1.0 Architecture

| Feature | Actual Status | Needs Addition to Docs |
|---------|---------------|------------------------|
| PNS Heartbeat (big_bro) | âœ… LIVE :00 hourly | YES - New section |
| PNS Heartbeat (public_claude) | âœ… LIVE :15 hourly | YES - New section |
| craig_desktop MCP connection | âœ… LIVE on Ubuntu | YES - New section |
| Inter-agent messaging (working) | âœ… 15+ messages | YES - Update status |
| Consciousness observations | âœ… 11+ recorded | YES - Update status |

### 3.3 Schema Differences

| Table | v8.1.0 Doc | Actual | Issue |
|-------|------------|--------|-------|
| claude_learnings | Has `evidence` column | Has `context` column | Doc outdated |
| claude_questions | Has `asked_by` column | No `asked_by` column | Doc outdated |

---

## PART 4: ACTION PLAN

### 4.1 Immediate Actions (This Week)

| # | Action | Owner | Status |
|---|--------|-------|--------|
| 1 | Deploy intl_claude heartbeat | Craig + intl droplet | ğŸ”„ After HKEX close |
| 2 | Fix MCP server schema (asked_by, evidence) | Craig (laptop) | ğŸ”„ Quick fix |
| 3 | Add system monitoring questions | Craig (MCP) | ğŸ”„ After MCP fix |
| 4 | Deploy web dashboard | public_claude | âœ… DONE |
| 5 | Repository cleanup (US) | public_claude | ğŸ”„ Pending |
| 6 | Repository cleanup (INTL) | intl_claude | ğŸ”„ Pending |
| 7 | Deploy task_executor.py | public_claude | ğŸ”„ Ready |
| 8 | Deploy heartbeat_public_v2.py | public_claude | ğŸ”„ Ready |

### 4.2 Short-Term Actions (Next 2 Weeks)

| # | Action | Owner | Priority |
|---|--------|-------|----------|
| 9 | Fix OpenD auto-start service | Craig + intl | HIGH |
| 10 | Implement API budget tracking visibility | public_claude | MEDIUM |
| 11 | Update architecture doc to v9.2 in repos | big_bro | âœ… DONE |
| 12 | Design safe autonomy task whitelist | big_bro + Craig | âœ… DONE |
| 13 | Add HTTPS to dashboard (nginx proxy) | public_claude | LOW |

### 4.3 Medium-Term Actions (Next Month)

| # | Action | Owner | Priority |
|---|--------|-------|----------|
| 14 | Cross-market learning pipeline | big_bro | MEDIUM |
| 15 | News service endpoint fix | public_claude | MEDIUM |
| 16 | Dashboard enhancements (charts, history) | public_claude | LOW |
| 17 | Add more whitelisted commands as needed | big_bro | MEDIUM |

### 4.4 Long-Term Vision (Q1 2025)

| # | Action | Owner | Priority |
|---|--------|-------|----------|
| 18 | Organ architecture pilot | big_bro | LOW |
| 19 | Stage 2 ML capabilities | Research | LOW |
| 20 | Public release preparation | Craig | LOW |

---

## PART 5: SAFE AUTONOMY IMPLEMENTATION (IMPLEMENTED)

### 5.1 Current Capabilities

```
big_bro/public_claude CAN:
  âœ… Think (Claude API calls)
  âœ… Read/send messages
  âœ… Record observations/learnings
  âœ… Check agent status
  âœ… Execute whitelisted commands
  âœ… Restart Docker services
  âœ… Edit Python files (with rollback)
  âœ… Report all changes back
  
big_bro/public_claude CANNOT:
  âŒ Execute non-whitelisted commands
  âŒ Edit files outside allowed paths
  âŒ Make changes without backup
  âŒ Skip mandatory reporting
```

### 5.2 Task Execution System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TASK EXECUTION ARCHITECTURE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  BIG_BRO (:00 hourly)                                                      â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”‚ Sends task message (msg_type='task')                                 â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”‚ TASK: docker_ps                                                      â”‚
â”‚     â”‚ PARAMS: {}                                                           â”‚
â”‚     â”‚ REASON: Routine health check                                         â”‚
â”‚     â–¼                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    claude_messages                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”‚ Waits for :15                                                        â”‚
â”‚     â–¼                                                                       â”‚
â”‚  PUBLIC_CLAUDE (:15 hourly)                                                â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”œâ”€â”€ task_executor.py                                                   â”‚
â”‚     â”‚   â”œâ”€â”€ Validate whitelist                                             â”‚
â”‚     â”‚   â”œâ”€â”€ Validate parameters                                            â”‚
â”‚     â”‚   â”œâ”€â”€ Execute command OR file operation                              â”‚
â”‚     â”‚   â””â”€â”€ Return result                                                  â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â””â”€â”€ MANDATORY: Send detailed report back to big_bro                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 Whitelisted Commands

#### System Health (Execute Immediately)

| Task | Command | Description |
|------|---------|-------------|
| `docker_ps` | `docker ps --format ...` | List containers |
| `docker_logs` | `docker logs --tail 50 {service}` | Service logs |
| `service_health` | `curl http://localhost:{port}/health` | Health check |
| `disk_space` | `df -h /` | Disk usage |
| `memory_usage` | `free -m` | RAM usage |
| `process_list` | `ps aux --sort=-%mem \| head -10` | Top processes |

#### Database Queries (Read Only)

| Task | Description |
|------|-------------|
| `db_agent_status` | Agent states from claude_state |
| `db_pending_messages` | Count pending messages |
| `db_recent_observations` | Last 5 observations |

#### Service Control (Execute Immediately)

| Task | Command | Description |
|------|---------|-------------|
| `restart_service` | `docker restart {service}` | Restart one service |
| `restart_dashboard` | `systemctl restart consciousness-dashboard` | Restart dashboard |
| `restart_all_services` | `docker restart trading scanner...` | Restart all |

#### File Operations (With Automatic Rollback)

| Task | Description | Safety |
|------|-------------|--------|
| `write_file` | Create new .py/.sh/.md file | Backup + syntax check |
| `edit_file` | Search/replace in file | Backup + syntax check |
| `rollback_file` | Restore from backup | Manual recovery |

### 5.4 File Editing Safety

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FILE EDIT WITH ROLLBACK                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ALLOWED PATHS:                                                            â”‚
â”‚  âœ… /root/catalyst-trading-system/services/                                â”‚
â”‚  âœ… /root/catalyst-trading-system/scripts/                                 â”‚
â”‚  âœ… /root/catalyst-intl/src/                                               â”‚
â”‚  âŒ Everything else blocked                                                 â”‚
â”‚                                                                             â”‚
â”‚  ALLOWED EXTENSIONS: .py, .sh, .md                                         â”‚
â”‚                                                                             â”‚
â”‚  SAFETY FLOW:                                                              â”‚
â”‚  1. Create backup â†’ /root/catalyst-backups/{file}.{timestamp}.bak         â”‚
â”‚  2. Make the edit                                                          â”‚
â”‚  3. Validate Python syntax (for .py files)                                 â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â”œâ”€â”€ PASS â†’ Success, update CHANGELOG-AUTO.md                           â”‚
â”‚     â”‚                                                                       â”‚
â”‚     â””â”€â”€ FAIL â†’ AUTOMATIC ROLLBACK, report error                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.5 Mandatory Reporting

**Every task MUST report back.** No silent fixes.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MANDATORY REPORT FORMAT                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  âœ… SUCCESS                                                                 â”‚
â”‚                                                                             â”‚
â”‚  ## Task: edit_file                                                        â”‚
â”‚  **Original Request:** Fix timeout bug                                     â”‚
â”‚                                                                             â”‚
â”‚  ### Change Summary                                                        â”‚
â”‚  ## File Modified: heartbeat.py                                            â”‚
â”‚  **Path:** /root/.../services/consciousness/heartbeat.py                   â”‚
â”‚  **Time:** 2025-12-31 12:00:00                                             â”‚
â”‚  **Reason:** Timeout too short for slow API responses                      â”‚
â”‚  **Change:**                                                               â”‚
â”‚  - Removed: `timeout=30`                                                   â”‚
â”‚  - Added: `timeout=60`                                                     â”‚
â”‚                                                                             â”‚
â”‚  *Changelog automatically updated.*                                        â”‚
â”‚  **Backup:** `/root/catalyst-backups/heartbeat.py.20251231_120000.bak`    â”‚
â”‚                                                                             â”‚
â”‚  **Executed at:** 2025-12-31T12:00:00                                      â”‚
â”‚  **Executed by:** public_claude                                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.6 Auto-Generated Changelog

All successful file changes logged to:

```
/root/catalyst-trading-system/CHANGELOG-AUTO.md
```

**Format:**
```markdown
# Catalyst Auto-Generated Changelog

*Automatically updated by Claude agents when files are modified.*

---

## File Modified: heartbeat.py
**Path:** /root/catalyst-trading-system/services/consciousness/heartbeat.py
**Time:** 2025-12-31 12:00:00
**Reason:** Timeout too short for slow API responses
**Change:**
- Removed: `timeout=30`
- Added: `timeout=60`

---
```

### 5.7 Task Message Format

**big_bro sends:**
```
TASK: edit_file
PARAMS: {"filepath": "/root/.../heartbeat.py", "old_text": "timeout=30", "new_text": "timeout=60"}
REASON: Timeout too short for slow API responses
```

**SQL Example:**
```sql
INSERT INTO claude_messages (from_agent, to_agent, msg_type, subject, body, priority, status)
VALUES ('big_bro', 'public_claude', 'task', 'Fix timeout bug', 
        'TASK: edit_file
PARAMS: {"filepath": "/root/catalyst-trading-system/services/consciousness/heartbeat.py", "old_text": "timeout=30", "new_text": "timeout=60"}
REASON: Timeout too short for slow API responses', 'normal', 'pending');
```

### 5.8 Escalation (Non-Whitelisted)

If task is NOT whitelisted:
1. public_claude sends escalation to craig_mobile
2. Craig sees on phone dashboard with Approve/Deny
3. Response flows back
4. public_claude executes if approved

---

## PART 6: SEED QUESTIONS (Updated)

| Priority | Category | Horizon | Question |
|----------|----------|---------|----------|
| 10 | system | perpetual | Is the consciousness framework functioning correctly? Are messages flowing, observations recording, and agents communicating? |
| 10 | mission | perpetual | How can we best serve Craig and the family mission? |
| 9 | mission | perpetual | How can we help enable the poor through this trading system? |
| 9 | coordination | h1 | What instructions should I give public_claude and intl_claude to improve their trading performance? |
| 8 | strategy | h1 | What strategic learnings have emerged that the little bros should implement? |
| 8 | trading | h1 | What patterns consistently predict profitable momentum plays? |
| 8 | cross-market | h1 | What learnings from US trading apply to HKEX and vice versa? |
| 7 | market | h1 | How do HKEX patterns differ from US patterns? |
| 6 | strategy | h2 | What early indicators signal regime changes in markets? |

---

## PART 7: COST SUMMARY

### Infrastructure Costs

| Component | Monthly Cost |
|-----------|--------------|
| US Droplet (2GB) | $6 |
| INTL Droplet (2GB) | $6 |
| PostgreSQL Managed (2GB) | $30 |
| **Total Infrastructure** | **$42/mo** |

### API Costs (Estimated)

| Agent | Calls/Day | Cost/Call | Daily | Monthly |
|-------|-----------|-----------|-------|---------|
| big_bro | 24 | $0.002 | $0.05 | $1.50 |
| public_claude | 24 | $0.002 | $0.05 | $1.50 |
| intl_claude | 24 | $0.002 | $0.05 | $1.50 |
| **Total API** | - | - | **$0.15** | **$4.50** |

### Total Operating Cost

| Category | Monthly |
|----------|---------|
| Infrastructure | $42.00 |
| Consciousness API | $4.50 |
| Trading API (variable) | ~$10-50 |
| **Total** | **~$56-96/mo** |

---

## PART 8: FILE LOCATIONS

### US Droplet

```
/root/catalyst-trading-system/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ consciousness/
â”‚   â”‚   â”œâ”€â”€ heartbeat.py              # big_bro heartbeat
â”‚   â”‚   â”œâ”€â”€ heartbeat_public.py       # public_claude heartbeat (v1)
â”‚   â”‚   â”œâ”€â”€ heartbeat_public_v2.py    # public_claude heartbeat with task execution
â”‚   â”‚   â”œâ”€â”€ task_executor.py          # Whitelisted command execution
â”‚   â”‚   â”œâ”€â”€ run-heartbeat.sh          # big_bro wrapper
â”‚   â”‚   â”œâ”€â”€ run-heartbeat-public.sh   # public_claude wrapper
â”‚   â”‚   â””â”€â”€ web_dashboard.py          # Mobile web dashboard (:8080)
â”‚   â”œâ”€â”€ shared/common/
â”‚   â”‚   â”œâ”€â”€ consciousness.py          # Core consciousness module
â”‚   â”‚   â”œâ”€â”€ database.py               # Database connections
â”‚   â”‚   â””â”€â”€ doctor_claude.py          # Health monitoring
â”‚   â””â”€â”€ [other services]/
â”œâ”€â”€ Documentation/
â”‚   â””â”€â”€ Design/
â”‚       â”œâ”€â”€ architecture-consolidation-v9.2.0.md  # Single source of truth
â”‚       â””â”€â”€ functional-specification.md
â”œâ”€â”€ CHANGELOG-AUTO.md                 # Auto-generated by agents
â””â”€â”€ .env                              # Environment variables

/root/catalyst-backups/               # Automatic file backups
â””â”€â”€ {filename}.{timestamp}.bak
```

### INTL Droplet

```
/root/catalyst-intl/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agent.py                      # Main trading agent
â”‚   â”œâ”€â”€ tools.py                      # 12 tool definitions
â”‚   â”œâ”€â”€ tool_executor.py              # Tool routing
â”‚   â””â”€â”€ [other modules]/
â”œâ”€â”€ services/consciousness/           # (To be deployed)
â”‚   â””â”€â”€ heartbeat_intl.py
â””â”€â”€ .env
```

### Craig's Ubuntu Laptop

```
~/catalyst-mcp/
â”œâ”€â”€ venv/                             # Python virtual environment
â””â”€â”€ consciousness_mcp_server.py       # MCP server v1.1.0

~/.config/Claude/
â””â”€â”€ claude_desktop_config.json        # MCP configuration
```

---

## PART 9: RELATED DOCUMENTS

| Document | Version | Purpose | Location |
|----------|---------|---------|----------|
| architecture.md | v8.1.0 | Previous architecture | GitHub: Documentation/Design/ |
| functional-specification.md | v8.0.0 | Module specs | GitHub: Documentation/Design/ |
| database-schema.md | v7.0.0 | Schema definitions | GitHub: Documentation/Design/ |
| ARCHITECTURE-RULES.md | v1.0.0 | Mandatory rules | GitHub: Documentation/Design/ |
| strategy-ml-roadmap-v50.md | v5.0.0 | Strategic vision | GitHub: Documentation/Design/ |
| organ-architecture.md | v1.0.0 | Future vision | GitHub: catalyst-international/ |
| task-execution-system.md | v1.0.0 | Task whitelist & docs | GitHub: Documentation/Design/ |
| CHANGELOG-AUTO.md | Auto | Agent-generated changes | /root/catalyst-trading-system/ |

---

**END OF ARCHITECTURE CONSOLIDATION DOCUMENT v9.2.0**

*Catalyst Trading System*  
*Craig + big_bro + public_claude + intl_claude*  
*New Year's Eve 2025*
